# HTTP Request: Claude API Call

**Node Type:** HTTP Request
**Position:** After Build Claude Request

## Configuration

- **Method**: `POST`
- **URL**: `https://api.anthropic.com/v1/messages`
- **Authentication**: `Generic Credential Type` â†’ `Header Auth`
  - **Name**: `x-api-key`
  - **Value**: `sk-ant-api03-YOUR-ANTHROPIC-API-KEY`
- **Send Headers**: Yes
  - **Name**: `anthropic-version`
  - **Value**: `2023-06-01` (Fixed mode)
- **Send Body**: Yes
- **Body Content Type**: `Raw/Custom`
- **Content Type**: `application/json`
- **Body** (Expression mode):

```javascript
{{ JSON.stringify($json) }}
```

## Notes

- Uses Claude Sonnet 4 (latest as of 2025)
- Includes tool definitions for Notion page creation
- Claude will return a tool_use block with structured page content
- Response will contain stop_reason: "tool_use"

## Response Format

```json
{
  "id": "msg_123",
  "type": "message",
  "role": "assistant",
  "content": [
    {
      "type": "tool_use",
      "id": "toolu_123",
      "name": "create_notion_page",
      "input": {
        "title": "Page title generated by Claude",
        "content": "Formatted markdown content",
        "tags": ["tag1", "tag2"]
      }
    }
  ],
  "stop_reason": "tool_use"
}
```
